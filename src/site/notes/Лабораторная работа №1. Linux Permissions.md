---
{"dg-publish":true,"permalink":"/laboratornaya-rabota-1-linux-permissions/","dgShowFileTree":true}
---

# Лабораторная работа №1. Linux Permissions

*2022-ФГиИБ-ИБ-1б Шевченко Никита Алексеевич*!

![0-repositories 1.png](/img/user/0-repositories%201.png)
Перед лабораторной работой были добавлены неофициальные репозитории для программ, которые могут понадобиться.
### 1. Создание пользователей
**1.1. Создать 3 новых пользователя (user1, user2, user3). Создать для них домашнии директории и установить shell-оболочку по умолчанию (/bin/sh)**
![1-addusers.png](/img/user/1-addusers.png)
Было добавлено три пользователя. 

| №   | Имя пользователя | Пароль |
| --- | ---------------- | ------ |
| 1   | alyona           | vector |
| 2   | michael          | vector |
| 3   | katya            | vector |

**1.2. Проверить, что пользователи и домашние директории были созданы. Проверить группы, которым принадлежат пользователи.**
![1_2-etcpasswd.png](/img/user/1_2-etcpasswd.png)
![1_2-etcgroup.png](/img/user/1_2-etcgroup.png)
Числа в /etc/passwd/ означают соответственно id пользователя и id его группы по умолчанию. 
**1.3. Просмотреть файл /etc/shadow, объяснить его структуру.**
![1_3-etcshadow.png](/img/user/1_3-etcshadow.png)
В файле /etc/shadow хранится имя пользователя, хеш его пароля и другие специализированные поля, такие как дата последнего изменения пароля, время, через которое его можно будет изменить, через сколько дней пароль устареет, за сколько дней до того, как пароль устареет, начать напоминать о необходимости смены пароля, через сколько дней после того, как пароль устареет, заблокировать учётную запись пользователя, дата, при достижении которой учётная запись блокируется, зарезервированное поле.
![1_3-passwd.png](/img/user/1_3-passwd.png)
По умолчанию, как говорится в объяснении команды, используется алгоритм хэширования sha512.

![1_3-passchanged.png](/img/user/1_3-passchanged.png)

Меняем пароль для *katya* на *vector2* и смотрим изменённый /etc/shadow.

![1_3_newetcshadow.png](/img/user/1_3_newetcshadow.png)
Как мы видим, хеш пароля изменился.

**1.4. Создайте новую группу, которая будет включать двух из трех пользователей (user1, user2). Удалите группы тех пользователей, которых вы объединили (user1, user2).**
![1_4-newgroup.png](/img/user/1_4-newgroup.png)
Создаём группу alymic. 
![1_4-deleteprgroups.png](/img/user/1_4-deleteprgroups.png)

![1_4-deleteprgroupspasswd.png](/img/user/1_4-deleteprgroupspasswd.png)
Удаляем упоминания оригинальных групп пользователей alyona и michael в файлах /etc/passwd и /etc/group.

![1_4-done.png](/img/user/1_4-done.png)
Проверяем.
### 2. Разрешения

**2.1. Авторизуйтесь под первым пользователем (user1). Создайте файл в домашней директории пользователя, проверьте разрешения по умолчанию.**

**2.2. Измените права таким образом, чтобы пользователь той же группы (user2) мог редактировать файл, а отдельный (user3) - не мог видеть и редактировать.**

**2.3. Измените права на файл таким образом, чтобы владелец (user1) и отдельный пользватель (user3) могли читать и редактировать файл, а второй пользователь (user2) - нет.**

**2.4. Создайте директорию, поместите в нее несколько файлов. Повторите шаг 2.2 и 2.3 для директории и файлов внутри нее.**

**2.5. Создайте скрипт на ЯП Python с расширением $*$.py. Задайте ему шебанг. Попробуйте запустить скрипт самостоятельно, без вызова интерпретатора.**

### 3. Специальные разрешения

**3.1. Что делает следующая команда?**

**3.2. Зайдите под первым пользователем (user1) и создайте директорию (например, dir1), внутрь поместите несколько исполняемых скриптов с расширением .py. Для этой директории рекурсивно установите UID, GID и Sticky Bit. Дайте скриптам права на исполнение.**

**3.3. Удалите права на исполнения для всего в домашней директории.**

**3.4. Установите для созданной директории (dir1) права таким образом, чтобы пользователи из других групп могли осуществлять навигацию и читать файлы внутри.**

**3.5. Авторизуйтесь в системе под вторым пользователем (user2) и создайте директорию {user2}__share. Установите разрешения таким образом, чтобы второй пользователь мог делиться файлами с первым (user1) и отдельным (user3)**.

**3.6. Создайте файл sensetive_data от имени второго пользователя (user2) и запишите в него какую-либо текстовую информацию. Уберите разрешения для группы и всех остальных.**
